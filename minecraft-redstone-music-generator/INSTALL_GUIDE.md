# Minecraft红石音乐投影生成器 - 完整安装使用指南

## 系统要求
- Windows 7/8/10/11
- Python 3.8 或更高版本
- 至少 2GB 可用内存
- 至少 500MB 可用磁盘空间

## 快速开始

### 第一步：安装Python
1. 访问 https://www.python.org/downloads/
2. 下载Python 3.8或更高版本
3. 安装时务必勾选"Add Python to PATH"

### 第二步：运行项目
1. 解压项目文件到任意目录
2. 双击运行 `start_all.bat`
3. 等待两个命令行窗口打开
4. 浏览器会自动打开 http://localhost:8080

### 第三步：使用工具
1. **上传音频** - 拖放或选择MP3/WAV/OGG/M4A文件
2. **调整参数** - 调整音调、音高、速度等
3. **试听音频** - 点击"试听调整后音频"检查效果
4. **生成投影** - 点击"生成红石音乐投影"
5. **下载文件** - 下载 .schematic 或 .litematic 文件

## 常见问题解决

### 1. Python未找到
- 确保安装Python时勾选了"Add Python to PATH"
- 或手动添加Python到系统环境变量

### 2. 端口占用
- 如果8080或5000端口被占用，工具会自动使用其他端口
- 或手动关闭占用端口的程序

### 3. 音频试听失败
- 确保安装了FFmpeg（工具会自动处理）
- 或安装 pydub: `pip install pydub`

### 4. 投影文件无法导入Minecraft
- 确保使用正确的投影Mod：
  - **.schematic** 文件：使用WorldEdit或Schematica
  - **.litematic** 文件：使用Litematica
- 确保Minecraft版本与Mod版本兼容

## 文件格式说明

### 支持的音频格式
- MP3 (.mp3) - 最常用
- WAV (.wav) - 高质量无损
- OGG (.ogg) - 压缩格式
- M4A (.m4a) - Apple音频格式

### 生成的投影格式
- **.schematic** - 传统格式，兼容WorldEdit、Schematica
- **.litematic** - 现代格式，兼容Litematica投影Mod

## 高级功能

### 音频参数调整
- **音调调整**：-12到+12半音
- **音高调整**：-2到+2八度
- **播放速度**：0.5x到2.0x
- **音符密度**：低、中、高三档

### 红石电路优化
- **自动调音**：自动匹配Minecraft音符盒音高
- **电路优化**：合并接近的音符，优化红石线路
- **时长保持**：确保生成音乐的时长与原曲一致

## 故障排除

### 音频处理失败
1. 检查音频文件是否损坏
2. 尝试转换为MP3格式
3. 确保文件大小不超过50MB

### 投影生成失败
1. 检查Python依赖是否完整
2. 确保有足够的磁盘空间
3. 查看后端服务器日志

### 游戏内无法加载
1. 确保安装了正确的投影Mod
2. 检查Minecraft版本兼容性
3. 尝试不同的投影文件格式

## 技术支持
- 查看 `logs/` 目录下的日志文件
- 检查控制台输出的错误信息
- 确保所有依赖包已正确安装

## 更新日志

### 版本 2.0 (当前)
- 修复音频试听功能
- 解决时长压缩问题
- 修复Schematic文件格式
- 增强错误处理
- 改进用户界面

### 版本 1.0 (初始)
- 基础音频处理
- 红石音乐映射
- 投影文件生成
- 基本用户界面